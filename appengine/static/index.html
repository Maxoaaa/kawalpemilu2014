<html>
<head>
<style type="text/css">
.tps td { white-space: nowrap; }
.aggregate tr:nth-child(even) { background: #EEE; }
.aggregate tr:nth-child(odd) { background: #FFF; }
.aggregate tbody > tr:hover { background-color: #CCF; }
#header { background-color: #CCC; }
#header { cursor: pointer; }
.aggregate td { padding: 2px 5px 2px 5px; font-family: verdana; font-size:11px; }
.aggregate thead > tr > th { padding:0; margin:0; }
.delta { font-size:9px; }
.delta.complete {}
.delta.incomplete { color: #888; }
.aggregate tr.total td:first-child { text-align: right; }
.aggregate tr.total td { background: #ccc; font-weight: bold; }
.win { background-color: "lightgreen"; }
.winmistake { background-color: "lightgreen"; color: "red"; }
.lose { background-color: "lightpink"; }
.losemistake { background-color: "lightpink"; }
.mistake { background-color: "lightpink"; }
.c1diff { border: 2px solid red; }
.red { color: red; font-weight: bold }
</style>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-52796581-1', 'auto');
  ga('send', 'pageview');
  if (top!=self) {
    top.location.replace(document.location);
    alert("Untuk alasan keamanan, kita tidak mengizinkan penggunaan IFrame; klik OK untuk keluar dari IFrame.")
  }
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<!-- <script src="jquery.min.js"></script> -->
<script>
var hie = [];
var ids2names = {};
var host = 'http://www.kawalpemilu.org';
var TPSLN_ID = 99999;
var THRESHOLD = 0.005;
var N_PPLN = 130;
var COLUMN_ORDER = ['c', 'da', 'db', 'dc'];

function set_hie(depth, parent, opt_dontpush, opt_next) {
  hie.length = depth + 1;
  hie[depth] = parent;

  if (depth == 4) {
    display_tps(parent);
  } else {
    display_aggregate(parent, depth, opt_next);
  }


  var s = '<a href="javascript:set_hie(0, 0)">Nasional</a>';
  for (var i = 1; i < hie.length; i++) {
    s += ' &raquo; <a href="javascript:set_hie(' + i + ', ' + hie[i] + ')">' + ids2names[hie[i]] + '</a>';
  }
  $('#hie').html(s);
  $('#hie2').html(s);
  var ht = '0';
  for (var i = 1; i <= depth; i++) {
    ht = ht+'.'+hie[i];
  }

  if (!opt_dontpush) {
    history.pushState(null, null, '#'+ht);
    ga('send', 'screenview', {
    'screenName': window.location.hash
  });
  }
}

function prefix_padd(num, cnt) {
  num = num + '';
  while (num.length < cnt) num = '0' + num;
  return num;
}

function image_filename(p, t, h) {
  return prefix_padd(p, 7) + prefix_padd(t, 3) + prefix_padd(h, 2);
}

function update_sum(tps_no) {
  var prabowo = $('#input1_' + tps_no).val() || 0;
  var jokowi = $('#input2_' + tps_no).val() || 0;
  $('#input3_' + tps_no).val(parseInt(prabowo) + parseInt(jokowi));
}

function input_box(parent, tps_no) {
  return 'Data belum dimasukkan.';
}

function gen_values(parent, reported_by, tps_no, prabowo, jokowi, valid, invalid, fbid) {
  var err = '';
  if (reported_by) {
    err += '<br>Error reported';
  } else {
  var hash = (location.hash.length>0) ? location.hash.substr(1) : "";
  err += "<br><a target=\"_blank\" href=\"https://docs.google.com/forms/d/1YT78OME0woe3MA2bjhLoaWFU3GRB1XKAC0WSTrS3Ap0/viewform?entry.523444839=" + hash
         + "&entry.1914184921=" + parent +
         "&entry.1875556460=" + ids2names[hie[3]] + "&entry.711131508=" + ids2names[hie[4]] + "&entry.875394862=" + tps_no + "&entry.475186929=\">Laporkan kesalahan</a>";
  }
  var dsah = valid - (prabowo + jokowi)
  return '<table>' +
    '<tr><td>Prabowo:<td id="tps_id1_' + tps_no + '">' + prabowo +
    '<tr><td>Jokowi:<td id="tps_id2_' + tps_no + '">' + jokowi +
    '<tr><td>Suara sah:<td id="tps_id3_' + tps_no + '" ' + (prabowo + jokowi == valid ? '' : 'bgcolor=magenta') +'>' + valid +
      (dsah == 0 ? '' :
        (' (' + (dsah < 0 ? '-' : '+') + Math.abs(dsah) + ')')
      ) +
    '<tr><td>Tidak sah:<td id="tps_id4_' + tps_no + '">' + invalid +
    '<tr><th colspan=2>' + err +
  '</table>';
}

function display_tps(parent) {
  $('#msg_status').html('Fetching ...');
  $('#msg_status2').html('Fetching ...');

  $.ajax(host + '/api/tps/' + parent, {
    cache: false,
    data: {},
    dataType: "text", // expect back a text to sanitize errors.
    error: function (xhr, status, error) {
      console.log(status);
      console.error(error);
    },
    success: function( data_txt ) {
    $('#msg_status').html('');
    $('#msg_status2').html('');
    var data = JSON.parse(data_txt);
    var s = '<table border="1" class="tps"><thead><tr>\
      <th width="50">TPS\
      <th width="175">C1 pindai penuh\
      <th class="h4" width="225">Halaman 4\
      <th width="200">Nilai urun daya\
      <th class="h1" width="225">Halaman 1\
      <th class="h2" width="225">Halaman 2\
      <th class="h3" width="225">Halaman 3\
      <th class="h5" width="225">Halaman 5\
    </thead><tbody>';
    var tps_pending = 0;
    for (var i = 0; i < data.length; i++) {
      var r = data[i];
      var tps_no = i + 1;
      var is_pending = !r[2] && !r[3] && !r[4] && !r[5];
      var has_scan = r[6];
      var has_error = (r[7] == '0') ? false : r[7];
      var entered_by = r[8];
      var num1 = image_filename(parent, tps_no, 1);
      var num2 = image_filename(parent, tps_no, 2);
      var num3 = image_filename(parent, tps_no, 3);
      var num4 = image_filename(parent, tps_no, 4);
      var num5 = image_filename(parent, tps_no, 5);
      if (is_pending && !tps_pending) tps_pending = tps_no;
      s += '<tr bgcolor=' + (has_error ? '#ffaaaa' : '') + '><td>#' + r[0] +
        '</td><td align=center>' +
        'Jika snippet di sebelah<br>kanan salah, anda bisa<br>melihat halaman lainnya<br>dari website KPU:<br><br>' +
          '<a href="http://scanc1.kpu.go.id/viewp.php?f=' + image_filename(parent, tps_no, 1) + '.jpg" target="_blank">Halaman 1</a><br>' +
          '<a href="http://scanc1.kpu.go.id/viewp.php?f=' + image_filename(parent, tps_no, 2) + '.jpg" target="_blank">Halaman 2</a><br>' +
          '<a href="http://scanc1.kpu.go.id/viewp.php?f=' + image_filename(parent, tps_no, 3) + '.jpg" target="_blank">Halaman 3</a><br>' +
          '<a href="http://scanc1.kpu.go.id/viewp.php?f=' + image_filename(parent, tps_no, 4) + '.jpg" target="_blank">Halaman 4</a><br>' +
          '<a href="http://scanc1.kpu.go.id/viewp.php?f=' + image_filename(parent, tps_no, 5) + '.jpg" target="_blank">Halaman 5</a><br></td>' +
        '<td class="h4"><a href="http://scanc1.kpu.go.id/viewp.php?f=' + num4 +
          '.jpg" target="_blank"><div style="width: 200px; height: 300px; overflow: hidden;">' +
        '<img id="h4img'+ i + '" style="position: relative; left: -400px; top: -120px;" width="600" src="" rsrc="http://scanc1.kpu.go.id/viewp.php?f=' + num4 + '.jpg"></div></a></td>' +
        '<td align=center id="csval_'+ tps_no +'">' + (has_scan ? (is_pending ? input_box(parent, tps_no) :
          gen_values(parent, has_error, tps_no, r[2], r[3], r[4], r[5], entered_by)) : ' N / A ') + '</td>' +
        '<td class="h1"><a href="http://scanc1.kpu.go.id/viewp.php?f=' + num1 +
          '.jpg" target="_blank"><div style="width: 200px; height: 300px; overflow: hidden;">' +
        '<img id="h1img'+ i + '" style="position: relative; left: -400px; top: -120px;" width="600" src="" rsrc="http://scanc1.kpu.go.id/viewp.php?f=' + num1 + '.jpg"></div></a></td>' +
        '<td class="h2"><a href="http://scanc1.kpu.go.id/viewp.php?f=' + num2 +
          '.jpg" target="_blank"><div style="width: 200px; height: 300px; overflow: hidden;">' +
        '<img id="h2img'+ i + '" style="position: relative; left: -400px; top: -120px;" width="600" src="" rsrc="http://scanc1.kpu.go.id/viewp.php?f=' + num2 + '.jpg"></div></a></td>' +
        '<td class="h3"><a href="http://scanc1.kpu.go.id/viewp.php?f=' + num3 +
          '.jpg" target="_blank"><div style="width: 200px; height: 300px; overflow: hidden;">' +
        '<img id="h3img'+ i + '" style="position: relative; left: -400px; top: -120px;" width="600" src="" rsrc="http://scanc1.kpu.go.id/viewp.php?f=' + num3 + '.jpg"></div></a></td>' +
        '<td class="h5"><a href="http://scanc1.kpu.go.id/viewp.php?f=' + num5 +
          '.jpg" target="_blank"><div style="width: 200px; height: 300px; overflow: hidden;">' +
        '<img id="h5img'+ i + '" style="position: relative; left: -400px; top: -120px;" width="600" src="" rsrc="http://scanc1.kpu.go.id/viewp.php?f=' + num5 + '.jpg"></div></a></td>';
    }
    $("#tbl").html(s + '</tbody></table>');
    updateColumnsTPS();
    setTimeout(function () {
      $('#input1_' + tps_pending).focus();
      var el = $('#input1_' + tps_pending).position();
      if (el) $(window).scrollTop(el.top - 400);
    }, 100);
    }
  });

}

function disp_percent(rat) {
  return percent(rat).replace(/\./, ',') + "%";
}

function disp_delta(i) {
  if (i < 0) return "-" + format(Math.abs(i));
  else if (i > 0) return "+" + format(Math.abs(i));
  return i;
}

function disp_delta_percent(rat) {
  if (isNaN(rat)) return '0,00';
  var p = percent(Math.abs(rat)).replace(/\./, ',');
  if (rat < -1e-4) return "-" + p + "%";
  else if (rat > 1e-4) return "+" + p + "%";
  return p + "%";
}

function percent(rat) {
  if (isNaN(rat)) return '0.00';
  var p = Math.round(rat * 10000);
  return Math.floor(p / 100) + '.' + prefix_padd(p % 100, 2);
}

function replace_char(s, index, ch) {
  return s.substr(0, index) + ch + s.substr(index + 1);
}

function format(number) {
  if (number == 0) return '0';
  var nres = '' + number;
  var res = '';
  for (var i =0; i< nres.length;i++) {
    if (i > 0 && i%3 == 0) {
      res = '.' + res;
    }
    res = nres[nres.length-i-1] + res;
  }
  return res;
}

var allData = {};
var dataRetrieved = [ false, false, false ];
var C1DATA = 0;
var DABCDATA = 1;
var PPLNDATA = 2;

function display_recap(prefix, highlight, regionName) {
  var pos = 0;
  for (var i = 0; i < COLUMN_ORDER.length; i++) {
  if (COLUMN_ORDER[i]==prefix) {
    pos = i;
    break;
    }
  }

  var children = prefix + 'Children';

  // indices
  var ID = 0;
  var NAMA = 1;
  var NO1 = 2;
  var NO2 = 3;
  var TOTAL = 4;
  // only for recap
  var PRESENTASE = 5;
  var DONE = 6;
  var TO_BE_DONE = 7;

  // children
  for (var i = 0; i < allData[children].length; i++) {
    var row = allData[children][i];
    var complete = prefix == 'dc' || row[DONE] == row[TO_BE_DONE];
    if (row[TOTAL] > 0) { // entered
      var percentCur = [ row[NO1] / row[TOTAL], row[NO2] / row[TOTAL]];
      var pbcs = format(row[NO1]);
      var pbps = disp_percent(percentCur[0]);
      var jkcs = format(row[NO2]);
      var jkps = disp_percent(percentCur[1]);
      for (var k = 0; k < pos; k++) {
        var prevIdx = -1;
        prevChildren = COLUMN_ORDER[k] + 'Children';
        for (var j = 0; j < allData[prevChildren].length; j++) {
          if (allData[prevChildren][j][ID] == row[ID]) {
            prevIdx = j;
            break;
          }
          }

        var diff;
        var absDiff;
        var rowPrev = allData[prevChildren][prevIdx];
        var percentPrev = [rowPrev[NO1] / rowPrev[TOTAL], rowPrev[NO2] / rowPrev[TOTAL]];
        if (prevIdx == -1 || rowPrev[TOTAL] == 0) { // WHAT!!
          diff = [percentCur[0], percentCur[1]];
          absDiff = [row[NO1], row[NO2]];
        } else {
          diff = [percentCur[0] - percentPrev[0], percentCur[1] - percentPrev[1]];
          absDiff = [row[NO1] - rowPrev[NO1], row[NO2] - rowPrev[NO2]];
        }
        var pbpsHigh = (highlight && (rowPrev[TOTAL] == 0 || Math.abs(diff[0]) >= THRESHOLD)) ? "red" : '';
        var jkpsHigh = (highlight && (rowPrev[TOTAL] == 0 || Math.abs(diff[1]) >= THRESHOLD)) ? "red" : '';

        var pairTag = 'delta-' + COLUMN_ORDER[k] + '-' + prefix;
        pbcs = pbcs + '<div class="delta ' + pairTag + ' ' + (complete?'complete':'incomplete')+'">(' + disp_delta(absDiff[0]) + ')</div>';
        pbps = pbps + '<div class="delta ' + pairTag + ' ' + pbpsHigh + '">(' + disp_delta_percent(diff[0]) + ')</div>';
        jkcs = jkcs + '<div class="delta ' + pairTag + ' ' + (complete?'complete':'incomplete')+'">(' + disp_delta(absDiff[1]) + ')</div>';
        jkps = jkps + '<div class="delta ' + pairTag + ' ' + jkpsHigh + '">(' + disp_delta_percent(diff[1]) + ')</div>';

      }

      if (row[NO1] > row[NO2]) {
        $('#' + prefix + '_pb_p_'+row[ID]).css('background-color', "lightgreen");
      }
      if (row[NO1] < row[NO2]) {
        $('#' + prefix + '_jk_p_'+row[ID]).css('background-color', "lightgreen");
      }

      $('#' + prefix + '_pb_c_'+row[ID])
        .html(pbcs)
        .data('sort', row[NO1]);

      $('#' + prefix + '_pb_p_'+row[ID])
        .html(pbps)
        .data('sort', percentCur[0]);

      $('#' + prefix + '_jk_c_'+row[ID])
        .html(jkcs)
        .data('sort', row[NO2]);

      $('#' + prefix + '_jk_p_'+row[ID])
        .html(jkps)
        .data('sort', percentCur[1]);

      if (document.getElementById(prefix + '_p_' + row[ID])) {
        $('#' + prefix + '_p_' + row[ID]).text(disp_percent(row[PRESENTASE]))
          .data('sort', row[PRESENTASE]);
        $('#' + prefix + '_p_' + row[ID]).attr('title', row[DONE] + ' ' + regionName +' dari ' + row[TO_BE_DONE]);
        if (complete) {
          $('#' + prefix + '_p_' + row[ID]).css('background', "lightgreen");
        }
      }
    }
  }

  // ppln
  if (prefix == "dc" && "ppln" in allData) {
    allData[prefix][NO1] += allData["ppln"]["total"][6];
    allData[prefix][NO2] += allData["ppln"]["total"][7];
    allData[prefix][TOTAL] += allData["ppln"]["total"][6] + allData["ppln"]["total"][7];
  }

  // aggregate
  var row = allData[prefix];
  var complete = (row[DONE] == row[TO_BE_DONE]);
  if (row[TOTAL] > 0) {
    $('.' + prefix + '_pb_ct').text(format(row[NO1]))
      .data('sort', row[NO1]/row[TOTAL]);
    $('.' + prefix + '_pb_pt').text(disp_percent(row[NO1]/row[TOTAL]))
      .data('sort', row[NO1]/row[TOTAL]);
    if (row[NO1]>row[NO2]){
      $('.' + prefix + '_pb_pt').css('background-color', "lightgreen");
    }
    $('.' + prefix + '_jk_ct').text(format(row[NO2]))
      .data('sort', row[NO2]/row[TOTAL]);
    $('.' + prefix + '_jk_pt').text(disp_percent(row[NO2]/row[TOTAL]))
      .data('sort', row[NO2]/row[TOTAL]);
    if (row[NO2]>row[NO1]){
      $('.' + prefix + '_jk_pt').css('background-color', "lightgreen");
    }
    if ($('.' + prefix + '_pt').length) {
      $('.' + prefix + '_pt').text(disp_percent(row[PRESENTASE]));
      $('.' + prefix + '_pt').attr('title', format(row[DONE]) + ' ' + regionName +' dari ' + format(row[TO_BE_DONE]));
      if (complete) {
        $('.' + prefix + '_pt').addClass("win"); // css('background', "lightgreen");
      }
    }
  }
}

var sortState = [1, 1];

function sort(i) {
  var trs = $('table tr.datarow');
  var tds = $(trs[0]).find('td');
  var idx = 0;
  for (var j=0; j<tds.length; j++) {
    if ($(tds[j]).data('sort-index') == i) {
      idx = j + 1;
      break;
    }
  }

  var mul = 1;
  if (sortState[0] === idx)
    mul = sortState[1] * -1;
  sortState = [idx, mul];

  trs.sort(function(a, b) {
    var ka = $(a).find('td:nth-child('+idx+')').data('sort');
    var kb = $(b).find('td:nth-child('+idx+')').data('sort');
    if (!ka && !kb) return 0 * mul;
    if (!ka && !!kb) return -1 * mul;
    if (!!ka && !kb) return 1 * mul;
    if (!!ka.localeCompare) return ka.localeCompare(kb) * mul;
    return (ka - kb) * mul;
  });
  $(trs).detach();
  $(trs).insertAfter($($('table tr.total')[0]));
}

function get_c1(parent, depth, opt_next) {
  $.ajax(host + '/api/children/' + parent, {
    cache: false,
    data: {},
    dataType: "text", // expect back a text to sanitize errors.
    error: function (xhr, status, error) {
      console.log(status);
      console.error(error);
    },
    success: function( data_txt ) {
      // BUG
      var x = data_txt.indexOf("PALENGA'\"AN");
      if (x != -1) data_txt = replace_char(data_txt, x + 8, '\'');
      x = data_txt.indexOf("RA'\"AS");
      if (x != -1) data_txt = replace_char(data_txt, x + 3, '\'');
      var data = JSON.parse(data_txt);
      allData['cChildren'] = data;
      dataRetrieved[C1DATA] = true;
      real_display(parent, depth, opt_next);
    }
  });
}

function get_dabc(parent, depth, opt_next) {
  $.ajax(host + '/da1x/' + parent, {
    cache: false,
    data: {},
    dataType: "text", // expect back a text to sanitize errors.
    error: function (xhr, status, error) {
      console.log(status);
      console.error(error);
    },
    success: function( data_txt ) {
      var data = JSON.parse(data_txt);
      if ('da1' in data) {
        allData['da'] = data['da1'];
        allData['daChildren'] = data['children_da1'];
      }
      if ('db1' in data) {
        allData['db'] = data['db1'];
        allData['dbChildren'] = data['children_db1'];
      }
      if ('dc1' in data) {
        allData['dc'] = data['dc1'];
        allData['dcChildren'] = data['children_dc1'];
      }
      dataRetrieved[DABCDATA] = true;
      real_display(parent, depth, opt_next);
    }
  });
}

function get_ppln(parent, depth, opt_next) {
  var data_ppln;
  $.ajax(host + '/da1x/99999', {
    cache: false,
    data: {},
    dataType: "text", // expect back a text to sanitize errors.
    error: function (xhr, status, error) {
      console.log(status);
      console.error(error);
    },
    success: function(data_txt) {
      data_ppln = JSON.parse(data_txt);
      var count = 0;
      for (var i = 0; i < data_ppln["detail"].length; i++)
        if (data_ppln["detail"][i][4] != 0)
          count++;
      data_ppln["total"].push(count);
      data_ppln["total"].push(N_PPLN);
      allData["ppln"] = data_ppln;
      dataRetrieved[PPLNDATA] = true;
      real_display(parent, depth, opt_next);
    }
  });
}

function display_ppln() {
  var data = allData["ppln"];
  if (data != null) {
    var table = $('<table class="aggregate">');
    var tr = $('<tr class="header" id="header" bgcolor="#DDDDDD">\
      <th onclick="sort(0)" width="40">No\
      <th onclick="sort(1)" width="170">Negara\
      <th onclick="sort(2)" width="110">Kota\
      <th onclick="sort(3)" width="140" class="c1" colspan="2">Prabowo-Hatta<br><span style="font-size: 9pt">(Pengumuman PPLN)</span>\
      <th onclick="sort(4)" width="140" class="dc1" colspan="2">Prabowo-Hatta<br>(DC1)\
      <th onclick="sort(5)" width="140" class="c1" colspan="2">Jokowi-JK<br><span style="font-size: 9pt">(Pengumuman PPLN)</span>\
      <th onclick="sort(6)" width="140" class="dc1" colspan="2">Jokowi-JK<br>(DC1)\
      <th onclick="sort(7)" width="70">Suara sah\
      <th onclick="sort(8)" width="70">Tidak sah\
      <th width="70">Sumber\
    </tr>');
    table.append(tr);

    total = data["total"];
    detail = data["detail"];
    dc1 = data["dc1"]; // data["c1"]; // data["dc1"];

    tot = [0, 0, 0, 0, 0, 0, 0, 0];

    for (var i = 0; i < detail.length; i++) {
      var negara = detail[i][0];
      var kota = detail[i][1];
      var c11 = detail[i][2];
      var c12 = detail[i][3];
      var c11p = c11 / (c11 + c12);
      var c12p = c12 / (c11 + c12);
      var dc11 = ("dc1" in data) ? dc1[i][2] : 0;
      var dc12 = ("dc1" in data) ? dc1[i][3] : 0;
      var dc11p = dc11 / (dc11 + dc12);
      var dc12p = dc12 / (dc11 + dc12);
      var sah = detail[i][4];
      var tidaksah = detail[i][5];
      var diff1 = c11 != 0 && c11 != dc11;
      var diff2 = c12 != 0 && c12 != dc12;
      tot[0] += c11 ? parseInt(c11) : 0;
      tot[1] += c12 ? parseInt(c12) : 0;
      tot[2] += dc11 ? parseInt(dc11) : 0;
      tot[3] += dc12 ? parseInt(dc12) : 0;
      tot[4] += sah ? parseInt(sah) : 0;
      tot[5] += tidaksah ? parseInt(tidaksah) : 0;

      tr = $('<tr class="datarow" id="row' + i + '"><td align=center data-sort-index="0" data-sort="'+i+'">' + (i + 1) +
      '<td data-sort-index="1" data-sort="'+negara+'">' + negara + '</td>' +
      '<td data-sort-index="2" data-sort="'+kota+'">' + kota + '</td>' +
      '<td data-sort-index="3" class="c1" align="right" data-sort="'+c11+'">' + (c11 != 0 ? format(c11) : '') + '</td><td align="right" class="c1"'+ (c11 > c12 ? ' bgcolor="lightgreen"' : '') + '>' + (c11 != 0 ? disp_percent(c11p) : '') + '</td>' +
      '<td data-sort-index="4" class="dc1" align="right" data-sort="'+dc11+'">' + (dc11 != 0 ? format(dc11) : '') + (c11 != 0 ? '<br><span class="delta' + (diff1 ? ' red' : '') +'">(' + disp_delta(dc11 - c11) + ')</span> ' : '') +
        '</td><td align="right" ' + (dc11 > dc12 ? 'bgcolor="lightgreen" ' : '') + 'class="dc1">' + (dc11 != 0 ? disp_percent(dc11p) : '') + '</td>' +
      '<td data-sort-index="5" class="c1" align="right" data-sort="'+c12+'">' + (c12 != 0 ? format(c12) : '') + '</td><td align="right" class="c1"' + (c12 > c11 ? ' bgcolor="lightgreen"' : '') + '>' + (c12 != 0 ? disp_percent(c12p) : '') + '</td>' +
      '<td data-sort-index="6" class="dc1" align="right" data-sort="'+dc12+'">' + (dc12 != 0 ? format(dc12) : '') + (c12 != 0 ? '<br><span class="delta' + (diff2 ? ' red' : '') + '">(' + disp_delta(dc12 - c12) + ')</span> ' : '') +
        '</td><td align="right" ' + (dc12 > dc11 ? 'bgcolor="lightgreen" ' : '') + 'class="dc1">' + (dc12 != 0 ? disp_percent(dc12p) : '') + '</td>' +
      '<td data-sort-index="7" align="right" data-sort="' + sah + '">' + (sah != 0 ? format(sah) : '') + '</td>' +
      '<td data-sort-index="8" align="right" data-sort="' + tidaksah + '">' + (tidaksah != 0 ? format(tidaksah) : '') + '</td>' +
      '<td>' +
        (detail[i][7] != "" ? '<a target="_blank" href="' + detail[i][7] + '">[1]</a> ' : '') +
        (detail[i][8] != "" ? '<a target="_blank" href="' + detail[i][8] + '">[2]</a> ' : '') +
        (detail[i][9] != "" ? '<a target="_blank" href="' + detail[i][9] + '">[3]</a>' : '') +
        '</td></tr>'
      );
      table.append(tr);
    }

    var c11 = tot[0];
    var c12 = tot[1];
    var c11p = c11 / (c11 + c12);
    var c12p = c12 / (c11 + c12);
    var dc11 = tot[2];
    var dc12 = tot[3];
    var dc11p = dc11 / (dc11 + dc12);
    var dc12p = dc12 / (dc11 + dc12);
    var sah = tot[4];
    var tidaksah = tot[5];
    console.log("sanity check: ", tot[0] == total[1]);
    console.log("sanity check: ", tot[1] == total[2]);

    var trTotal = $('<tr class="total"><td colspan="3">TOTAL</td>' +
      '<td align="right" class="c1">' + format(c11) + '</td><td align="right" class="c1 c1pbp">' + disp_percent(c11p) + '</td>' +
      '<td align="right" class="dc1">' + (dc11 != 0 ? format(dc11) : "") + '</td><td align="right" class="dc1 dc1pbp">' + (dc11 != 0 ? disp_percent(dc11p) : "") + '</td>' +
      '<td align="right" class="c1">' + format(c12) + '</td><td align="right" class="c1 c1jkp">' + disp_percent(c12p) + '</td>' +
      '<td align="right" class="dc1">' + (dc12 != 0 ? format(dc12) : "") + '</td><td align="right" class="dc1 dc1jkp">' + (dc12 != 0 ? disp_percent(dc12p) : "") + '</td>' +
      '<td align="right">' + format(sah) + '</td>' +
      '<td align="right">' + format(tidaksah) + '</td>' +
      '<td></td></tr>'
    );

    table.append(trTotal);
    trTotal.clone().insertAfter(table.find('.header'));

    $('#tbl').empty();
    $('#tbl').append(table);

    updateColumns();
    sortState = [1, 1];

    // hidup copy paste! :D
    if (c11 > c12) {
        $('.c1pbp').css('background-color', "lightgreen");
    } else if (c11 < c12) {
        $('.c1jkp').css('background-color', "lightgreen");
    }
    if (dc11 > dc12) {
        $('.dc1pbp').css('background-color', "lightgreen");
    } else if (dc11 < dc12) {
        $('.dc1jkp').css('background-color', "lightgreen");
    }
  }
}


function display_aggregate(parent, depth, opt_next) {
  $('#msg_status').html('Fetching ...');
  $('#msg_status2').html('Fetching ...');

  dataRetrieved = [false, false, false];

  if (parent != TPSLN_ID) {
    get_c1(parent, depth, opt_next);
    get_dabc(parent, depth, opt_next);
  }
  if (parent == 0 || parent == TPSLN_ID) {
    get_ppln(parent, depth, opt_next);
  }
}

function real_display(parent, depth, opt_next) {
  if (parent == TPSLN_ID && dataRetrieved[PPLNDATA]) {
    $('#msg_status').html('');
    $('#msg_status2').html('');
    display_ppln();
  }
  else if (dataRetrieved[C1DATA] &&
           dataRetrieved[DABCDATA] &&
            (parent != 0 || dataRetrieved[PPLNDATA])) {
    $('#msg_status').html('');
    $('#msg_status2').html('');
    var data = 0;
    var wda1 = depth < 4;
    var wdb1 = depth < 3;
    var wdc1 = depth < 2;
    var wdd1 = depth < 1;

    data = allData['cChildren'];
    var table = $('<table class="aggregate">');
    var tr = $('<tr class="header" id="header" bgcolor="#DDDDDD">\
      <th onclick="sort(0)" width="40">No\
      <th onclick="sort(1)" width="225">Tempat\
      <th onclick="sort(2)" width="120" class="c1" colspan="2">Prabowo-Hatta<br>(C1)' +
      (wda1 ? '<th onclick="sort(3)" width="120" class="da1" colspan="2">Prabowo-Hatta<br>(DA1)' : '')      +
      (wdb1 ? '<th onclick="sort(4)" width="120" class="db1" colspan="2">Prabowo-Hatta<br>(DB1)' : '')      +
      (wdc1 ? '<th onclick="sort(5)" width="120" class="dc1" colspan="2">Prabowo-Hatta<br>(DC1)' : '')      +
      '<th onclick="sort(6)" width="120" class="c1" colspan="2">Jokowi-JK<br>(C1)' +
      (wda1 ? '<th onclick="sort(7)" width="120" class="da1" colspan="2">Jokowi-JK<br>(DA1)' : '') +
      (wdb1 ? '<th onclick="sort(8)" width="120" class="db1" colspan="2">Jokowi-JK<br>(DB1)' : '') +
      (wdc1 ? '<th onclick="sort(9)" width="120" class="dc1" colspan="2">Jokowi-JK<br>(DC1)' : '') +
      '<th onclick="sort(10)" class="c1" width="70">Suara sah\
      <th onclick="sort(11)" class="c1" width="70">Tidak sah\
      <th onclick="sort(12)" class="c1" width="60">TPS Error\
      <th onclick="sort(13)" class="c1" width="60">TPS'+
//      <th width="200" colspan="2">Diproses/Total TPS'+
      (wdc1 ? '<th onclick="sort(14)" class="da1" width="60">DA1%' : '') +
      (wdd1 ? '<th onclick="sort(15)" class="db1" width="60">DB1%' : '') +
    '</tr>');
    table.append(tr);

    var total = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
//    console.log(data);
    for (var i = 0; i < data.length; i++) {
      var r = data[i];
      var prabowo_count = r[2];
      var jokowi_count = r[3];
      var valid_count = r[4];
      var invalid_count = r[5];
      var errors_count = r[6];
      var entered_count = r[7];
      var pending_count = r[8];
      var tps_count = r[9];
      var dsah = valid_count - (prabowo_count + jokowi_count);
      var prabowo_percent = disp_percent(prabowo_count / (prabowo_count + jokowi_count));
      var jokowi_percent = disp_percent(jokowi_count / (prabowo_count + jokowi_count));
      for (var j = 2; j <= 9; j++) total[j] += r[j];

      ids2names[r[0]] = r[1];
      var sort_of_done_entered = (percent(entered_count / tps_count) >= 99) ? 'bgcolor=lightgreen' : '';
      var sort_of_done_available = (percent(pending_count / tps_count) >= 99) ? 'bgcolor=lightgreen' : '';
      tr = $('<tr class="datarow" id="row' + i + '"><td align=center data-sort-index="0" data-sort="'+i+'">' + (i + 1) +
        '<td data-sort-index="1" data-sort="'+r[1]+'"><a href="javascript:set_hie(' + (depth + 1) + ',' + r[0] +')">' + r[1] + '</a>' +
        '<td data-sort-index="2" data-sort="'+prabowo_count+'" align=right width=60 class="c1">' + format(prabowo_count) +
        '<td data-sort-index="2" data-sort="'+prabowo_count+'" align=right class="c1" ' + (prabowo_count > jokowi_count ? "bgcolor=lightgreen" : "") + '>' + prabowo_percent +
        (wda1 ? '<td data-sort-index="3" align=right class="da1" id="da_pb_c_' + r[0] + '"></td><td align=right class="da1" id="da_pb_p_' + r[0] + '"></td>' : '') +
        (wdb1 ? '<td data-sort-index="4" align=right class="db1" id="db_pb_c_' + r[0] + '"></td><td align=right class="db1" id="db_pb_p_' + r[0] + '"></td>' : '') +
        (wdc1 ? '<td data-sort-index="5" align=right class="dc1" id="dc_pb_c_' + r[0] + '"></td><td align=right class="dc1" id="dc_pb_p_' + r[0] + '"></td>' : '') +
        '<td data-sort-index="6" data-sort="'+jokowi_count+'" align=right class="c1" width=60>' + format(jokowi_count) +
        '<td data-sort-index="6" data-sort="'+jokowi_count+'" align=right class="c1" ' + (prabowo_count < jokowi_count ? "bgcolor=lightgreen" : "") + '>' + jokowi_percent +
        (wda1 ? '<td data-sort-index="7" align=right class="da1" id="da_jk_c_' + r[0] + '"></td><td align=right class="da1" id="da_jk_p_' + r[0] + '"></td>' : '') +
        (wdb1 ? '<td data-sort-index="8" align=right class="db1" id="db_jk_c_' + r[0] + '"></td><td align=right class="db1" id="db_jk_p_' + r[0] + '"></td>' : '') +
        (wdc1 ? '<td data-sort-index="9" align=right class="dc1" id="dc_jk_c_' + r[0] + '"></td><td align=right class="dc1" id="dc_jk_p_' + r[0] + '"></td>' : '') +
        '<td class="c1" data-sort-index="10" data-sort="'+valid_count+'" align=right ' + (dsah != 0 ? "bgcolor=lightpink" : "") + '>' + format(valid_count) +
           (dsah != 0 ? (' <br> <span class="delta">(' + disp_delta(dsah) + ') </span>') : "") +
        '<td class="c1" data-sort-index="11" data-sort="'+invalid_count+'" align=right>' + format(invalid_count) +
        '<td data-sort-index="12" class="c1" data-sort="'+(errors_count/tps_count)+'" align=right ' + (errors_count != 0 ? "bgcolor=lightpink" : "") + ' title="' + format(errors_count) + " TPS dari " + format(tps_count) + '">' + disp_percent(errors_count / tps_count) + // format(errors_count) +
        '<td data-sort-index="13" class="c1" data-sort="'+(entered_count/tps_count)+'" align=right ' + sort_of_done_entered +' title="' + format(entered_count) + ' TPS dari ' + format(tps_count) + '">' +
           disp_percent(entered_count / tps_count) +
//        '<td align=right width=120>' + format(entered_count) + ' / ' + format(tps_count) +
//        '<td align=right '+sort_of_done_entered+'>' + percent(entered_count / tps_count) + '%' +
        (wdc1 ? '<td data-sort-index="14" align=right class="da1" id="da_p_' + r[0] + '"></td>' : '') +
        (wdd1 ? '<td data-sort-index="15" align=right class="db1" id="db_p_' + r[0] + '"></td>' : '') +
        '</tr>');
      table.append(tr);
    }

    // ppln
    if (parent == 0 || parent == TPSLN_ID) {
      var ppln = allData["ppln"];
      var r = ppln["total"];
      var name = r[0].toUpperCase();
      var prabowo_count = r[1];
      var jokowi_count = r[2];
      var valid_count = r[3];
      var invalid_count = r[4];
      var kpu1 = r[6];
      var kpu2 = r[7];
      var entered_count = r[8];
      var tps_count = r[9];

      ids2names[TPSLN_ID] = r[0];
      var i = data.length;
      tr = $('<tr class="datarow" id="row' + i + '"><td align=center data-sort-index="0" data-sort="'+i+'">' + (i + 1) +
        '<td data-sort-index="1" data-sort="'+name+'"><a href="javascript:set_hie(' + (depth + 1) + ',' + TPSLN_ID +')">' + name + '</a>' +
        '<td data-sort-index="2" data-sort="'+prabowo_count+'" align=right width=60 class="c1">' + format(prabowo_count) +
        '<td data-sort-index="2" data-sort="'+prabowo_count+'" align=right class="c1" ' + (prabowo_count > jokowi_count ? "bgcolor=lightgreen" : "") + '>' + disp_percent(prabowo_count / (prabowo_count + jokowi_count)) +
        '<td data-sort-index="3" data-sort="0" align=right class="da1" id="da_pb_c_' + TPSLN_ID + '">-----</td><td align=right data-sort="0" class="da1" id="da_pb_p_' + TPSLN_ID + '">-----</td>'+
        '<td data-sort-index="4" data-sort="0" align=right class="db1" id="db_pb_c_' + TPSLN_ID + '">-----</td><td align=right data-sort="0" class="db1" id="db_pb_p_' + TPSLN_ID + '">-----</td>' +
        '<td data-sort-index="5" data-sort="' + kpu1 + '" align=right class="dc1" id="dc_pb_c_' + TPSLN_ID + '">' + format(kpu1) + '</td><td align=right class="dc1" data-sort="' + kpu1 + '" id="dc_pb_p_' + TPSLN_ID + '"' + (kpu1 > kpu2 ? ' bgcolor="lightgreen" ' : '') + '>' + disp_percent(kpu1 / (kpu1 + kpu2)) + '</td>'  +
        '<td data-sort-index="6" data-sort="'+jokowi_count+'" align=right class="c1" width=60>' + format(jokowi_count) +
        '<td data-sort-index="6" data-sort="'+jokowi_count+'" align=right class="c1" ' + (prabowo_count < jokowi_count ? "bgcolor=lightgreen" : "") + '>' + disp_percent(jokowi_count / (prabowo_count + jokowi_count)) +
        '<td data-sort-index="7" data-sort="0" align=right class="da1" id="da_jk_c_' + TPSLN_ID + '">-----</td><td align=right class="da1" data-sort="0" id="da_jk_p_' + TPSLN_ID + '">-----</td>' +
        '<td data-sort-index="8" data-sort="0" align=right class="db1" id="db_jk_c_' + TPSLN_ID + '">-----</td><td align=right class="db1" data-sort="0" id="db_jk_p_' + TPSLN_ID + '">-----</td>' +
        '<td data-sort-index="9" data-sort="' + kpu2 + '" align=right class="dc1" id="dc_jk_c_' + TPSLN_ID + '">' + format(kpu2) + '</td><td align=right class="dc1" data-sort="' + kpu2 + '" id="dc_jk_p_' + TPSLN_ID + '"' + (kpu2 > kpu1 ? ' bgcolor="lightgreen" ' : '') + '>' + disp_percent(kpu2 / (kpu1 + kpu2)) + '</td>' +
        '<td class="c1" data-sort-index="10" data-sort="'+valid_count+'" align=right ' + (dsah != 0 ? "bgcolor=lightpink" : "") + '>' + format(valid_count) +
           (dsah != 0 ? (' <br> <span class="delta">(' + disp_delta(dsah) + ') </span>') : "") +
        '<td class="c1" data-sort-index="11" data-sort="'+invalid_count+'" align=right>' + format(invalid_count) +
        '<td data-sort-index="12" class="c1" data-sort="0" align=right>N/A</td>' +
        '<td data-sort-index="13" class="c1" data-sort="'+(entered_count/tps_count)+'" align=right ' + sort_of_done_entered +' title="' + format(entered_count) + ' PPLN dari ' + format(tps_count) + '">' +
           disp_percent(entered_count / tps_count) + "<br> PPLN</td>" +
        '<td data-sort-index="14" align=right class="da1" id="da_p_' + TPSLN_ID + '">N/A</td>'  +
        '<td data-sort-index="15" align=right class="db1" id="db_p_' + TPSLN_ID + '">N/A</td>'  +
        '</tr>');
      table.append(tr);
      total[2] += prabowo_count;
      total[3] += jokowi_count;
      total[4] += valid_count;
      total[5] += invalid_count;
    }

    // total
    var prabowo_count = total[2];
    var jokowi_count = total[3];
    var valid_count = total[4];
    var invalid_count = total[5];
    var errors_count = total[6];
    var entered_count = total[7];
    var pending_count = total[8];
    var tps_count = total[9];
    var dsah = valid_count - (prabowo_count + jokowi_count);
    var prabowo_percent = disp_percent(prabowo_count / (prabowo_count + jokowi_count));
    var jokowi_percent = disp_percent(jokowi_count / (prabowo_count + jokowi_count));
    var trTotal = $('<tr class="total"><td colspan="2">TOTAL</td>' +
      '<td align=right class="c1" width=60>' + format(prabowo_count) +
      '<td align=right class="c1pbp c1' + (prabowo_count > jokowi_count ? " win" : "") + '">' + prabowo_percent +
              (wda1 ? '<td align=right class="da1 da_pb_ct"><td align=right class="da1 da_pb_pt">' : '') +
              (wdb1 ? '<td align=right class="db1 db_pb_ct"><td align=right class="db1 db_pb_pt">' : '') +
              (wdc1 ? '<td align=right class="dc1 dc_pb_ct"><td align=right class="dc1 dc_pb_pt">' : '') +
      '<td align=right class="c1" width=60>' + format(jokowi_count) +
      '<td align=right class="c1jkp c1' + (prabowo_count < jokowi_count ? ' win' : '') + '">' + jokowi_percent +
              (wda1 ? '<td align=right class="da1 da_jk_ct"><td align=right class="da1 da_jk_pt">' : '') +
              (wdb1 ? '<td align=right class="db1 db_jk_ct"><td align=right class="db1 db_jk_pt">' : '') +
              (wdc1 ? '<td align=right class="dc1 dc_jk_ct"><td align=right class="dc1 dc_jk_pt">' : '') +
      '<td class="c1" align=right ' + (dsah != 0 ? 'class="mistake"' : "") + '>' + format(valid_count) +
           (dsah != 0 ? ' <br> <span class="delta">(' + disp_delta(dsah) + ')</span>': '') +
      '<td class="c1" align=right>' + format(invalid_count) +
      '<td align=right class="c1" ' + (errors_count != 0 ? 'class="mistake"' : "") + ' title="' + format(errors_count) + " TPS dari " + format(tps_count) + '">' + disp_percent(errors_count / tps_count) + // format(errors_count) +
      '<td align=right class="c1" ' + sort_of_done_entered +' title="' + format(entered_count) + ' TPS dari ' + format(tps_count) + '">' +
         disp_percent(entered_count / tps_count) +
//      '<td align=right width=100>' + format(entered_count) + ' / ' + format(tps_count) +
//      '<td align=right>' + percent(entered_count / tps_count) + '%' +
              (wdc1 ? '<td align=right class="da1 da_pt"></td>' : '') +
              (wdd1 ? '<td align=right class="db1 db_pt"></td>' : '') +
      '</tr>');
    table.append(trTotal);
    trTotal.clone().insertAfter(table.find('.header'));
    allData['c'] = total;

    if (opt_next && opt_next()) {
       // Do nothing
    } else {
      $('#tbl').empty();
      $('#tbl').append(table);

      updateColumns();
      sortState = [1, 1];
    }
    var regionName = ['propinsi', 'kabupaten/kota', 'kecamatan', 'kelurahan', 'tps'];
    if (wda1) display_recap('da', depth >= 2, regionName[2]);
    if (wdb1) display_recap('db', depth >= 1, regionName[1]);
    if (wdc1) display_recap('dc', depth >= 0, regionName[0]);
    updateDelta();

    // Hajar bleh!
    if (prabowo_count > jokowi_count) {
        $('.c1pbp').css('background-color', "lightgreen");
    } else if (prabowo_count < jokowi_count) {
        $('.c1jkp').css('background-color', "lightgreen");
    }
  }
}

function updatePos(opt_pos) {
  if (location.hash == "") {
    set_hie(0, 0);
    return false;
  }
  var hies = location.hash.substr(1).split('.');
  if (opt_pos >= hies.length) {
    return false;
  }
  for (var i = opt_pos; i+1 < hies.length; i++) {
    if (hie.length <= i || hie[i] != hies[i-0]) {
      set_hie(i, hies[opt_pos], true, function() { return updatePos(i+1);});
      return true;
    }
  }
  set_hie(hies.length-1, hies[hies.length-1], true, function() { return false;});
  return true;
}

function reload() {
 nest = location.hash != "";
  if (nest) {
   updatePos(0);
  ga('send', 'screenview', {
    'screenName': window.location.hash
  });
  } else
    set_hie(0, 0);
}

$(function () {
  reload();
})

function updateColumns() {
  var dd = ['c1', 'da1', 'db1', 'dc1'];
  for (var i=0; i<4; i++) toggle(dd[i], true);
  updateDelta();
}

function updateDelta() {
  var dd = ['c1', 'da1', 'db1', 'dc1'];
  var isOn = [];
  for (var i = 0; i < 4; i++) {
    isOn.push($('#cb-' + dd[i]).is(':checked'));
    for (var j = 0; j < 4; j++) {
      $('.delta-' + COLUMN_ORDER[i] + '-' + COLUMN_ORDER[j]).hide();
    }
  }
  for (var i = 1; i < 4; i++) {
    if (isOn[i])
      for (var j = i-1; j>=0; j--) {
        if (isOn[j]) {
          $('.delta-' + COLUMN_ORDER[j] + '-' + COLUMN_ORDER[i]).show();
          break;
        }
      }
  }
}

function toggle(d, opt_dontUpdateDelta) {
  var cb = $('#cb-' + d);
  var el = $('.' + d);
  if (cb.is(':checked')) el.show();
  else el.hide();
  if (!opt_dontUpdateDelta)
    updateDelta();
}

function updateColumnsTPS() {
  var dd = ['h3', 'h4', 'h1', 'h2', 'h5'];
  for (var i = 0; i < 5; i++) {
    toggleTPS(dd[i]);
  }
}

function toggleTPS(d) {
  var cb = $('#cb-' + d);
  var el = $('.' + d);
  if (cb.is(':checked')) {
    el.show();
    for (var j = 0; j < 500; j++) {
      var x = $('#' + d + 'img' + j);
      if (x.length)
        x.attr('src', x.attr('rsrc'));
      else
        break;
    }
  }
  else el.hide();
}



window.onhashchange = reload;
</script>
<title>Kawal Pemilu 2014</title>

</head>

<body>
Bergabung bersama kami bersama-sama kita Kawal Pemilu 2014!
<br>
Kunjungi <a target="_blank" href="https://www.facebook.com/pages/Kawal-Pemilu-2014/1452601258341836">Facebook Page Kawal Pemilu 2014</a> dan bantu kami melaporkan masalah pada data!
<a target="_blank" href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.kawalpemilu.org" data-text="Mari berpartisipasi mengawal pemilu bersama" data-hashtags="kawalpemilu">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
<br><br>
<!--  <i>Masalah teknis server sudah diatasi dan website ini sudah kembali pulih untuk semua pengunjung. Apabila mengalami kesulitan, coba clear DNS cache anda dan/atau gunakan <a href="https://developers.google.com/speed/public-dns/docs/using">Google DNS</a>.</i>
<br><br> -->
Bukalah halaman ini menggunakan peramban (browser) modern seperti <a href="https://www.mozilla.org/firefox">Firefox</a> atau <a href="https://www.google.com/intl/en/chrome/browser/">Chrome</a> versi terkini.<br>
Dan jangan lupa, baca petunjuk pakai di bawah. Data C1 terperinci tersedia di <a href="2">sini</a>.
<hr/>

<p>
<span style="display:inline-block; width: 75px"><input type="checkbox" id="cb-c1"  onclick="toggle('c1')" checked/>   <label style="cursor:pointer" for="cb-c1">C1</label> </span>
<span style="display:inline-block; width: 75px"><input type="checkbox" id="cb-da1" onclick="toggle('da1')"/> <label style="cursor:pointer" for="cb-da1">DA1</label> </span>
<span style="display:inline-block; width: 75px"><input type="checkbox" id="cb-db1" onclick="toggle('db1')"/> <label style="cursor:pointer" for="cb-db1">DB1</label> </span>
<span style="display:inline-block; width: 75px"><input type="checkbox" id="cb-dc1" onclick="toggle('dc1')" checked/> <label style="cursor:pointer" for="cb-dc1">DC1</label> </span>
<span style="display:inline-block; width: 135px"><input type="checkbox" id="cb-h4"  onclick="toggleTPS('h4')" checked/>   <label style="cursor:pointer" for="cb-h4">Snippet hal. 4</label> </span>
<span style="display:inline-block; width: 135px"><input type="checkbox" id="cb-h1"  onclick="toggleTPS('h1')"/>   <label style="cursor:pointer" for="cb-h1">Snippet hal. 1</label> </span>
<span style="display:inline-block; width: 135px"><input type="checkbox" id="cb-h2"  onclick="toggleTPS('h2')"/>   <label style="cursor:pointer" for="cb-h2">Snippet hal. 2</label> </span>
<span style="display:inline-block; width: 135px"><input type="checkbox" id="cb-h3"  onclick="toggleTPS('h3')"/>   <label style="cursor:pointer" for="cb-h3">Snippet hal. 3</label> </span>
<span style="display:inline-block; width: 135px"><input type="checkbox" id="cb-h5"  onclick="toggleTPS('h5')"/>   <label style="cursor:pointer" for="cb-h5">Snippet hal. 5</label> </span>
</p>

<p>
<span id="hie" style="display:inline"><a href="javascript:set_hie(0, 0)">Nasional</a></span>
<span id="msg_status"></span>
</p>

<div id="tbl"></div>

<p>
<span id="hie2" style="display:inline"><a href="javascript:set_hie(0, 0)">Nasional</a></span>
<span id="msg_status2"></span>
</p>
<hr/>
Website ini adalah bukan website resmi KPU dan angka bukan merupakan perhitungan resmi dari KPU.<br>
Data di situs ini berasal dari scan form <a target="_blank" href="http://pilpres2014.kpu.go.id/c1.php">C1</a> yang dipublish oleh KPU dan didigitisasi dengan bantuan relawan netizen yang independen.
Scan form C1 mungkin tidak terbuka bila diakses dari luar negeri karena adanya limitasi dari sisi server KPU.<br>
Khusus untuk <span title="Panitia Pemilihan Luar Negeri">PPLN</span>, data yang dikumpulkan berasal dari pengumuman PPLN atau artikel surat kabar yang memuat pengumuman PPLN Tersebut.
Data rekapitulasi KPU per PPLN akan ditampilkan ketika data tersebut tersedia.<br>
Kolom suara sah dan tidak sah dikalkulasi dari data C1.<br>
Data DA1 adalah hasil pleno tingkat kecamatan dengan menyediakan data sampai kelurahan. <br>
Data DB1 adalah hasil pleno tingkat kabupaten/kota dengan menyediakan data sampai kecamatan.<br>
Data DC1 adalah hasil pleno tingkat provinsi dengan menyediakan data sampai kabupaten/kota. <br>
Data <a target="_blank" href="http://pilpres2014.kpu.go.id/da1.php">DA1</a>, <a target="_blank" href="http://pilpres2014.kpu.go.id/db1.php">DB1</a> dan <a target="_blank" href="http://pilpres2014.kpu.go.id/dc1.php">DC1</a> tersebut diambil dari website <a target="_blank" href="http://kpu.go.id">KPU</a>.<br>
<ul>
<li>Data di halaman ini belum final dan terus diperbaharui tiap 10 menit.</li>
<li>Informasi tentang perbedaan hasil total dilakukan antara satu level dengan level di bawahnya. Misalnya, rekapitulasi di DB1 dengan rekapitulasi di DA1.</li>
<li>Perbedaan rekapitulasi persentase antara satu level dengan level aktif terdekat di bawahnya (misal antara DB1 dan DA1 apabila DA1 aktif, atau DB1 dan C1 apabila DA1 tidak aktif) akan ditandai merah bila melebihi 0,5%.</li>
<li>TPS Error: Jumlah TPS yang telah ditandai karena mengalami kesalahan form C1, kesalahan scan, maupun kesalahan input. Bila kesalahan input yang terjadi adalah isian suara sah tertukar dengan isian suara tidak sah atau total suara sah sudah tergabung dengan suara tidak sah, maka relawan memasukkan nilai yang sebenarnya dimaksud.</li>
<li>Urutan halaman scan C1 dapat saja muncul dalam urutan yang salah dikarenakan kesalahan pada saat mengunggah scan tersebut. Tampilan yang digunakan oleh situs ini mengikuti urutan pada server KPU.</li>
<li>Jumlah Suara Sah tidak selalu sama dengan Suara Prabowo-Hatta + Suara Jokowi-JK dikarenakan entri data memungkinkan overwrite angka jumlahnya. Ini bertujuan untuk mengetahui mana saja entri C1 yang bermasalah, baik karena C1 nya sudah salah atau karena human error sewaktu entri data.</li>
</ul>
<br>
Kabar gembira! Telah tersedia ekstrak dari <a href="http://www.kawalpemilu.org/">kawalpemilu.org</a>!
<ul>
<li> <a target="_blank" href="https://mega.co.nz/#!N5RjiZyR!bjFStrMwOu_XuSUGoW-6koD4XVpNd145CP1anKb18oA">(5 MB, zip)</a> &mdash; MD5-Sum: <tt>943e278781e404f810192f022d7de11e</tt> (MD5-Sum untuk berkas html: <tt>e52490259a1c52ca84936c4c2ce35f42</tt>) <br/>
  Alternatif: <a target="_blank" href="https://www.mediafire.com/?ilubbkq058w4ar2">[1]</a></li></ul>
Berkas zip ini berisi sebuah berkas HTML yang berisikan semua data yang direkam pada 2014-08-22 15:01 (<a href="http://id.wikipedia.org/wiki/Waktu_Universal_Terkoordinasi">UTC</a> +7).<br>
Butuh waktu beberapa detik untuk membuka berkas ini karena ukurannya yang besar.
</body>
</html>
